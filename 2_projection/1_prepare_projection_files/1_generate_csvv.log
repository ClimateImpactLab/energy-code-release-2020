
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   16.1   Copyright 1985-2019 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 24-core Stata perpetual license:
       Serial number:  501606209668
         Licensed to:  Goldman School of Public Policy
                       University of California, Berkeley

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do 1_generate_csvv.do 

. /*
> 
> Purpose: Create CSVV's required for projections  
> */
. 
. clear all

. set more off

. macro drop _all

. pause off

. cilpath
               DATA /home/liruixue/repos/cilpath/data
             OUTPUT /mnt
               REPO /home/liruixue/repos
  globals set

  c code          to change directories
  c cur  code     to add current directory to database
  c drop code     to drop entry

. * Download a command for dealing with matrices 
. qui net install http://www.stata.com/stb/stb56/dm79.pkg

. 
. //SET UP RELEVANT PATHS
. // path to energy-code-release repo 
. global root "${REPO}/energy-code-release-2020"

. 
. 
. //install global programs
. do $root/2_projection/0_packages_programs_inputs/projection_set_up/csvv_gener
> ation_stacked.do

. /*
> 
> Purpose: 
> 1. Produce CSVV files - ie convert the stata ster files containing regression
>  coefficients 
> into a format that our projection system understands
> 2. Produce full stacked vcv for delta method processing (combining impacts ac
> ross products to construct damages)
> 
> requires download of user written command matselrc: (can run net install http
> ://www.stata.com/stb/stb56/dm79.pkg)
> 
> */
.         
. *****************************************************************************
> ***
. 
. //Defining Programs
. 
. // get product index for regression coefficients based on product
. program define get_product_regression_index, rclass
  1. syntax , product(string)
  2. 
.         if "`product'"=="electricity" {
  3.                 local pg=1
  4. 
.         }
  5.         else if "`product'"=="other_energy" {
  6.                 local pg=2
  7.         }
  8. 
.         return scalar pg = `pg' 
  9. end

. 
. // return income group for decile and specification
. program define get_income_group, rclass
  1. syntax , model(string) grouping_test(string) product(string) bknum(string)
>  g(integer) 
  2. 
.         if (strpos("`model'", "TINV_clim") > 0) {
  3.                 if ( "`bknum'" == "break2" & "`product'" == "other_energy"
> ) {
  4. 
.                         if (`g'>=1) & (`g'<= 2) local lg = 1 
  5.                         if `g'>=3 & `g'<= 6  local lg = 2
  6.                         if `g'>=7 & `g'<= 10 local lg = 3 
  7. 
.                 }
  8.                 else if ("`bknum'" == "break2" & "`product'" == "electrici
> ty") {
  9.                         if (`g'>=1) & (`g'<=6) local lg = 1 
 10.                         if `g'==7 | `g'==8  local lg = 2
 11.                         if `g'==9 | `g'==10 local lg = 3 
 12.                 }
 13.                 else {
 14. 
.                         di "Must define income groups for `model' `grouping_t
> est' `bknum' `case' `IF' `product'!"
 15.                         assert inlist(`lg',1,2,3,4)
 16.                 }
 17. 
.                 if ("`grouping_test'" == "semi-parametric" & `lg' > 2) local 
> lg = 2 //
 18. 
.                 return scalar lg = `lg' 
 19.         }
 20.         else {
 21. 
.                 di "Must define income groups for `model' `grouping_test' `bk
> num' `case' `IF' `product'!"
 22.                 assert inlist(`lg',1,2,3,4)
 23. 
.         }
 24. end

. 
. // write csvv header for specifciation 
. program define write_csvv_header
  1. syntax , model(string) clim_data(string) spec_stem(string) product(string)
>  num_coefficients(integer) num_observations(integer) ma_inc(string)
  2. 
.         pause
  3.         file write csvv "---" _n
  4.         file write csvv "oneline: Energy IEA global splited CDD/HDD intera
> ction Model `model'" _n
  5.         file write csvv "version: ENERGY-GLOBAL-INTERACTION-`model'-`clim_
> data'" _n
  6.         file write csvv "dependencies: `spec_stem'_`model'`submodel_name'.
> ster" _n
  7.         file write csvv "description: Global regression on sector OTHERIND
> , source `product', poly 2, Model `model', Spec=FD_FGLS_inter, Climate Data= 
> `clim_data' . There are `num_coefficients' gamma reported in this CSVV in tot
> al. They can be equal across deciles depending on the model." _n
  8.         file write csvv "csvv-version: girdin-2017-01-10" _n
  9.         file write csvv "variables:" _n
 10.         file write csvv "  tas: Daily average temperature [C]"_n
 11.         file write csvv "  tas2: square daily average temperature [C^2]"_n
 12.         file write csvv "  tas-cdd-20: Max of daily average temperature mi
> nus 20C and zero [C]"_n
 13.         file write csvv "  tas-cdd-20-poly-2: Max of square daily average 
> temperature minus square 20C and zero [C^2]"_n
 14.         file write csvv "  tas-hdd-20: Max of 20C minus daily average temp
> erature and zero [C]"_n
 15.         file write csvv "  tas-hdd-20-poly-2: Max of square 20C minus squa
> re daily average temperature and zero [C^2]"_n
 16.         file write csvv "  incbinN: income bin 1-10 sorted by `ma_inc' log
>  GDP per cap, year 2000 dollars [NA]"_n
 17.         file write csvv "  climtas-cdd-20: MA15 average yearly CDD 20C [de
> gree-day]"_n 
 18.         file write csvv "  climtas-hdd-20: MA15 average yearly HDD 20C [de
> gree-day]"_n 
 19. 
.         file write csvv "  loggdppc-shifted: loggdppc - ibar [log(2005 PPP ad
> justed USD)]" _n
 20.         file write csvv "  loggdppc: `ma_inc' average log GDP per capita [
> log(2005 PPP adjusted USD)]"_n
 21. 
.         file write csvv "  outcome: energy use per capita [kWh/pc]"_n        
>   
 22.         file write csvv "..." _n
 23. 
.         file write csvv "observations"_n
 24.         file write csvv " `num_observations'" _n
 25. end

. 
. // write out names of climate variables
. program define write_climvar_header 
  1. syntax , model(string)
  2.         
.         file write csvv "prednames"_n
  3.         
.         //10 decile groups
.         
.         *part 1: betas
.         file write csvv "tas, tas2, "
  4.         file write csvv "tas, tas2, "
  5.         file write csvv "tas, tas2, "
  6.         file write csvv "tas, tas2, "
  7.         file write csvv "tas, tas2, "
  8.         file write csvv "tas, tas2, "
  9.         file write csvv "tas, tas2, "
 10.         file write csvv "tas, tas2, "
 11.         file write csvv "tas, tas2, "
 12.         file write csvv "tas, tas2, "
 13.         
.         *part 1.5: interacted betas
.         if (strpos("`model'","lininter") > 0) {
 14.                 
.                 file write csvv "tas, tas2, "
 15.                 file write csvv "tas, tas2, "
 16.                 file write csvv "tas, tas2, "
 17.                 file write csvv "tas, tas2, "
 18.                 file write csvv "tas, tas2, "
 19.                 file write csvv "tas, tas2, "
 20.                 file write csvv "tas, tas2, "
 21.                 file write csvv "tas, tas2, "
 22.                 file write csvv "tas, tas2, "
 23.                 file write csvv "tas, tas2, "
 24.         }
 25.         *Part 2: gammas, CDD
.         file write csvv "tas-cdd-20, tas-cdd-20-poly-2, "
 26.         file write csvv "tas-cdd-20, tas-cdd-20-poly-2, "
 27.         file write csvv "tas-cdd-20, tas-cdd-20-poly-2, "
 28.         file write csvv "tas-cdd-20, tas-cdd-20-poly-2, "
 29.         file write csvv "tas-cdd-20, tas-cdd-20-poly-2, "
 30.         file write csvv "tas-cdd-20, tas-cdd-20-poly-2, "
 31.         file write csvv "tas-cdd-20, tas-cdd-20-poly-2, "
 32.         file write csvv "tas-cdd-20, tas-cdd-20-poly-2, "
 33.         file write csvv "tas-cdd-20, tas-cdd-20-poly-2, "
 34.         file write csvv "tas-cdd-20, tas-cdd-20-poly-2, "
 35.         
.         *part 3: gammas, HDD
.         file write csvv "tas-hdd-20, tas-hdd-20-poly-2, "
 36.         file write csvv "tas-hdd-20, tas-hdd-20-poly-2, "
 37.         file write csvv "tas-hdd-20, tas-hdd-20-poly-2, "
 38.         file write csvv "tas-hdd-20, tas-hdd-20-poly-2, "
 39.         file write csvv "tas-hdd-20, tas-hdd-20-poly-2, "
 40.         file write csvv "tas-hdd-20, tas-hdd-20-poly-2, "
 41.         file write csvv "tas-hdd-20, tas-hdd-20-poly-2, "
 42.         file write csvv "tas-hdd-20, tas-hdd-20-poly-2, "
 43.         file write csvv "tas-hdd-20, tas-hdd-20-poly-2, "
 44.         file write csvv "tas-hdd-20, tas-hdd-20-poly-2"
 45.         
.         **Part 3.5: gammas, lgdppc**
.         
.         file write csvv ","
 46.         file write csvv "tas, tas2, "
 47.         file write csvv "tas, tas2, "
 48.         file write csvv "tas, tas2, "
 49.         file write csvv "tas, tas2, "
 50.         file write csvv "tas, tas2, "
 51.         file write csvv "tas, tas2, "
 52.         file write csvv "tas, tas2, "
 53.         file write csvv "tas, tas2, "
 54.         file write csvv "tas, tas2, "
 55.         file write csvv "tas, tas2"
 56.         
. 
.         **Part 4: gammas, lgdppc**
.         
.         if (strpos("`model'","lininter") > 0) {
 57.                 file write csvv ","
 58.                 file write csvv "tas, tas2, "
 59.                 file write csvv "tas, tas2, "
 60.                 file write csvv "tas, tas2, "
 61.                 file write csvv "tas, tas2, "
 62.                 file write csvv "tas, tas2, "
 63.                 file write csvv "tas, tas2, "
 64.                 file write csvv "tas, tas2, "
 65.                 file write csvv "tas, tas2, "
 66.                 file write csvv "tas, tas2, "
 67.                 file write csvv "tas, tas2"
 68.         }
 69.         
.         file write csvv _n
 70. end

. 
. // write out names of covariate variables
. program define write_covar_header 
  1. syntax , model(string)
  2. 
.         //Cov: 10 groups
. 
.         file write csvv "covarnames"_n
  3. 
.         *part 1: betas
.         file write csvv "incbin1, incbin1, "
  4.         file write csvv "incbin2, incbin2, "
  5.         file write csvv "incbin3, incbin3, "
  6.         file write csvv "incbin4, incbin4, "
  7.         file write csvv "incbin5, incbin5, "
  8.         file write csvv "incbin6, incbin6, "
  9.         file write csvv "incbin7, incbin7, "
 10.         file write csvv "incbin8, incbin8, "
 11.         file write csvv "incbin9, incbin9, "
 12.         file write csvv "incbin10, incbin10, "
 13. 
.         *part 1.5: interacted betas
.         if (strpos("`model'`submodel_name'","lininter") > 0) {
 14.                 file write csvv "year*incbin1, year*incbin1, "
 15.                 file write csvv "year*incbin2, year*incbin2, "
 16.                 file write csvv "year*incbin3, year*incbin3, "
 17.                 file write csvv "year*incbin4, year*incbin4, "
 18.                 file write csvv "year*incbin5, year*incbin5, "
 19.                 file write csvv "year*incbin6, year*incbin6, "
 20.                 file write csvv "year*incbin7, year*incbin7, "
 21.                 file write csvv "year*incbin8, year*incbin8, "
 22.                 file write csvv "year*incbin9, year*incbin9, "
 23.                 file write csvv "year*incbin10, year*incbin10, "
 24.         }
 25. 
.         *part 2: gammas, CDD
.         file write csvv "climtas-cdd-20*incbin1, climtas-cdd-20*incbin1, "
 26.         file write csvv "climtas-cdd-20*incbin2, climtas-cdd-20*incbin2, "
 27.         file write csvv "climtas-cdd-20*incbin3, climtas-cdd-20*incbin3, "
 28.         file write csvv "climtas-cdd-20*incbin4, climtas-cdd-20*incbin4, "
 29.         file write csvv "climtas-cdd-20*incbin5, climtas-cdd-20*incbin5, "
 30.         file write csvv "climtas-cdd-20*incbin6, climtas-cdd-20*incbin6, "
 31.         file write csvv "climtas-cdd-20*incbin7, climtas-cdd-20*incbin7, "
 32.         file write csvv "climtas-cdd-20*incbin8, climtas-cdd-20*incbin8, "
 33.         file write csvv "climtas-cdd-20*incbin9, climtas-cdd-20*incbin9, "
 34.         file write csvv "climtas-cdd-20*incbin10, climtas-cdd-20*incbin10,
>  "
 35. 
.         *part 3: gammas, HDD
.         file write csvv "climtas-hdd-20*incbin1, climtas-hdd-20*incbin1, "
 36.         file write csvv "climtas-hdd-20*incbin2, climtas-hdd-20*incbin2, "
 37.         file write csvv "climtas-hdd-20*incbin3, climtas-hdd-20*incbin3, "
 38.         file write csvv "climtas-hdd-20*incbin4, climtas-hdd-20*incbin4, "
 39.         file write csvv "climtas-hdd-20*incbin5, climtas-hdd-20*incbin5, "
 40.         file write csvv "climtas-hdd-20*incbin6, climtas-hdd-20*incbin6, "
 41.         file write csvv "climtas-hdd-20*incbin7, climtas-hdd-20*incbin7, "
 42.         file write csvv "climtas-hdd-20*incbin8, climtas-hdd-20*incbin8, "
 43.         file write csvv "climtas-hdd-20*incbin9, climtas-hdd-20*incbin9, "
 44.         file write csvv "climtas-hdd-20*incbin10, climtas-hdd-20*incbin10"
 45. 
.         *part 3.5: thrice interacted gammas
.         if (strpos("`model'`submodel_name'","lininter") > 0) {
 46.                 file write csvv "," 
 47.                 file write csvv "loggdppc-shifted*year*incbin1, loggdppc-s
> hifted*year*incbin1, "
 48.                 file write csvv "loggdppc-shifted*year*incbin2, loggdppc-s
> hifted*year*incbin2, "
 49.                 file write csvv "loggdppc-shifted*year*incbin3, loggdppc-s
> hifted*year*incbin3, "
 50.                 file write csvv "loggdppc-shifted*year*incbin4, loggdppc-s
> hifted*year*incbin4, "
 51.                 file write csvv "loggdppc-shifted*year*incbin5, loggdppc-s
> hifted*year*incbin5, "
 52.                 file write csvv "loggdppc-shifted*year*incbin6, loggdppc-s
> hifted*year*incbin6, "
 53.                 file write csvv "loggdppc-shifted*year*incbin7, loggdppc-s
> hifted*year*incbin7, "
 54.                 file write csvv "loggdppc-shifted*year*incbin8, loggdppc-s
> hifted*year*incbin8, "
 55.                 file write csvv "loggdppc-shifted*year*incbin9, loggdppc-s
> hifted*year*incbin9, "
 56.                 file write csvv "loggdppc-shifted*year*incbin10, loggdppc-
> shifted*year*incbin10 "
 57.         }
 58. 
.         **Part 4: gammas, lgdppc**
. 
.         file write csvv ","
 59.         file write csvv "loggdppc-shifted*incbin1, loggdppc-shifted*incbin
> 1, "
 60.         file write csvv "loggdppc-shifted*incbin2, loggdppc-shifted*incbin
> 2, "
 61.         file write csvv "loggdppc-shifted*incbin3, loggdppc-shifted*incbin
> 3, "
 62.         file write csvv "loggdppc-shifted*incbin4, loggdppc-shifted*incbin
> 4, "
 63.         file write csvv "loggdppc-shifted*incbin5, loggdppc-shifted*incbin
> 5, "
 64.         file write csvv "loggdppc-shifted*incbin6, loggdppc-shifted*incbin
> 6, "
 65.         file write csvv "loggdppc-shifted*incbin7, loggdppc-shifted*incbin
> 7, "
 66.         file write csvv "loggdppc-shifted*incbin8, loggdppc-shifted*incbin
> 8, "
 67.         file write csvv "loggdppc-shifted*incbin9, loggdppc-shifted*incbin
> 9, "
 68.         file write csvv "loggdppc-shifted*incbin10, loggdppc-shifted*incbi
> n10"
 69.         
.         file write csvv _n
 70. end

. 
. // write out gammas (coefficient values) for a given coefficient name given t
> he model specification and product
. // returns coefficient list 
. program define write_gammas, sclass
  1. syntax , model(string) grouping_test(string) clim_data(string) product(str
> ing) bknum(string) [ coef_term(string) ] coefficientlist(string) last_coef_te
> rm(string)
  2.         
.         assert inlist("`last_coef_term'", "TRUE", "FALSE")
  3.         
.         forval g=1/10 {
  4.                 
.                 if (substr("`coef_term'", -1, 1) == "I") {                   
>            
  5.                         get_income_group, model("`model'") grouping_test("
> `grouping_test'") product("`product'") bknum("`bknum'") g(`g')
  6.                         local lg = `r(lg)'
  7.                         return clear
  8.                 }
  9.                 else {
 10.                         local lg = ""
 11.                 }
 12. 
.                 get_product_regression_index, product("`product'")
 13.                 local pg = `r(pg)'
 14.                 return clear
 15. 
.                 local coefstub "c.indp`pg'#c.indf1#c.FD_`coef_term'`lg'temp"
 16.                 
.                 forval k=1/2 {
 17.                         
.                         local coef_name "`coefstub'`k'_`clim_data'"
 18.                         
.                         cap local beta = _b[`coef_name'] 
 19.                         
.                         // make up for inconsistent naming -- reason for inco
> nsistent naming is local character length got too long when _GMFD attached at
>  the end
.                         if _rc == 111 | _rc == 198 {
 20.                                 local coef_name "`coefstub'`k'"
 21.                                 local beta = _b[`coef_name']
 22.                         } 
 23. 
.                         local coefficientlist = "`coefficientlist' `coef_name
> '"
 24.                         file write csvv " `beta'"
 25.                         
.                         if (`g' == 10 & `k' == 2 & "`last_coef_term'" == "TRU
> E") {
 26.                                 file write csvv "" _n
 27.                         }
 28.                         else {
 29.                                 file write csvv ","
 30.                         }
 31.                 }       
 32.         }
 33. 
.         sreturn local coef_list "`coefficientlist'"
 34. end

. 
. // write out variance covariance matrix 
. // inputs coefficientlist output from write_gammas -- list of coefficients in
>  order written 
. program define write_vcv
  1. syntax , coefficientlist(string) num_coefficients(integer)
  2. 
.         file write csvv "gammavcv" _n
  3.                                 
.         foreach coef_row in `coefficientlist' {
  4.                 
.                 //keep track of which coefficient writing in row, specificall
> y keeping track of when writing last coefficient in each row
.                 local vcv_counter = 0
  5. 
.                 foreach coef_col in `coefficientlist' {
  6.                         
.                         //get covariance (this is inefficient )
.                         matselrc e(V) VCV, row(`coef_row') col(`coef_col')   
>    
  7.                         local vcv = el(VCV, 1, 1)
  8.                         file write csvv "`vcv'"
  9.                         
.                         //write new line or comma depending on where you are 
> in loop
.                         local vcv_counter = `vcv_counter' + 1 
 10. 
.                         if (`vcv_counter' < `num_coefficients') {
 11.                                 file write csvv ","
 12.                         }
 13.                         else if (`vcv_counter' == `num_coefficients') {
 14.                                 file write csvv "" _n
 15.                         }
 16.                         else {
 17.                                 di "I didn't fall into either category, ie
>  there was a hiccup!!!!!! counter: `num_coefficients' vcv counter: `vcv_count
> er'"
 18.                                 assert(1 == 0)
 19.                         }
 20.                 }
 21.         }       
 22. end

. 
. // load spec csv
. 
. program define load_spec_csv, rclass
  1. syntax , specpath(string) model(string)
  2.         
.         // load data and clean for desired model
.         import delimited using `specpath'/projection_specifications.csv, varn
> ames(1) clear
  3.         pause
  4.         keep if model_name == "`model'"
  5.         
.         // count number of coefficients for that model
.         count
  6.         local num_coefficients = `r(N)'
  7. 
.         return scalar nc = `num_coefficients'   
  8. end

. 
. // write csvv
. program define write_csvv, sclass
  1. syntax , datapath(string) outpath(string) root(string) model(string) clim_
> data(string) spec_stem(string) grouping_test(string) product(string) bknum(st
> ring) zero_case(string) issue_case(string) data_type(string)
  2.         
.         /////////////////////////////////////////////////////////////////////
> /////////////////////////////////////////////////////
>         
.         // part a.1: create locals for dataset and ster file
.         local data "`datapath'/`clim_data'_TINV_clim_regsort.dta"
  3.         local ster "`root'/sters/`spec_stem'_`model'.ster"
  4.         
.         // part a.2: insheet projection spec csv and write list of coefficien
> ts 
.         
.         load_spec_csv , specpath("`root'/2_projection/0_packages_programs_inp
> uts/projection_set_up") model("`model'")
  5.         local num_coefficients = `r(nc)'
  6.         return clear
  7. 
.         local coef_term_list ""
  8. 
.         forvalues nn = 1(1)`num_coefficients' {
  9.                 local coef_add = coefficient_names[`nn']
 10.                 local coef_term_list = "`coef_term_list' `coef_add'"
 11.         }
 12. 
.         di "coefficient list retrieved: `coef_term_list'"
 13. 
.         // each coefficient has 10 income deciles and 2 poly orders 
.         local num_coefficients = `num_coefficients' * 20
 14. 
.         /////////////////////////////////////////////////////////////////////
> //////////////////////////////////////////////////////
> 
.         // part b: load ster file and store relevant information 
.         use "`data'", clear 
 15.         estimate use "`ster'"
 16.         ereturn display
 17.         
.         estimates describe using "`ster'"
 18.         local num_observations = `e(N)'
 19.         local residualvcv = `e(rmse)' * `e(rmse)' 
 20. 
.         /////////////////////////////////////////////////////////////////////
> ///////////////////////////////////////////////////////
>         
.         // part c: initiate csvv file for writing
.         local output "`outpath'/`model'"
 21.         local csvv "`output'/`spec_stem'_OTHERIND_`product'_`model'.csvv"
 22.         
.         cap mkdir "`output'"
 23.         file open csvv using "`csvv'", write replace
 24. 
.         di "csvv initiated: `csvv'"
 25. 
.         /////////////////////////////////////////////////////////////////////
> ///////////////////////////////////////////////////////////
>         
.         // part d: write headers
. 
.         di "Writing csvv header..."
 26.         di "`model'"
 27.         pause
 28.         write_csvv_header , model("`model'") clim_data("`clim_data'") spec
> _stem("`spec_stem'") product("`product'") num_coefficients(`num_coefficients'
> ) num_observations(`num_observations') ma_inc("MA15")
 29. 
.         di "Writing climate variables..."
 30.         write_climvar_header , model("`model'")
 31. 
.         di "Writing covariates..."
 32.         write_covar_header , model("`model'")
 33.         
.         /////////////////////////////////////////////////////////////////////
> ///////////////////////////////////////////////////////////
>         
.         // part e: write coefficients
. 
.         di "Writing gammas..."
 34. 
.         file write csvv "gamma" _n
 35.         local coefficientlist = " " //create list with each coefficient st
> ored in csvv
 36.         local counter = 0
 37.         local last_coef_term "FALSE"
 38. 
.         foreach coef_term in "" `coef_term_list' {
 39. 
.                 di "Writing coef term: `coef_term'..."
 40.                 
.                 local counter = `counter' + 20
 41.                 
.                 if `num_coefficients' == `counter' local last_coef_term "TRUE
> "
 42. 
.                 write_gammas , model("`model'") grouping_test("`grouping_test
> '") clim_data("`clim_data'") product("`product'") bknum("`bknum'") coef_term(
> "`coef_term'") coefficientlist("`coefficientlist'") last_coef_term("`last_coe
> f_term'")
 43.                 
.                 local coefficientlist `s(coef_list)' 
 44.                 return clear
 45.         }
 46.         
.         /////////////////////////////////////////////////////////////////////
> /////////////////////////////////////////////////////////////
> 
.         // part f: write gamma vcv
.         // note this could be seriously sped up -- if anyone is interested in
>  improving by all meands
. 
.         di "Writing vcv..."
 47.         
.         write_vcv , coefficientlist("`coefficientlist'") num_coefficients(`nu
> m_coefficients')
 48. 
.         /////////////////////////////////////////////////////////////////////
> /////////////////////////////////////////////////////////////////
> 
.         // part g: close csvv after adding in residualvcv
. 
.         file write csvv "residvcv" _n
 49.         file write csvv "`residualvcv'" _n
 50.                                 
.         file close csvv
 51. 
.         /////////////////////////////////////////////////////////////////////
> /////////////////////////////////////////////////////////////////
> 
.         sreturn local coef_list "`coefficientlist'"
 52. end

. 
. 
. 
end of do-file

. 
. 
. ************************************************
. *Step 1: Set up common resources across models
. ************************************************
. 
. // ster stem for desired projection 
. local ster_stem = "FD_FGLS_inter"

. 
. // path to analysis data 
. local DATA "$root/data" 

. 
. // path to csvv output
. local output_csvv "$root/projection_inputs/csvv"

. cap mkdir "`output_csvv'"

. 
. // path to dataset with information about income deciles and income spline kn
> ot location
. local break_data "$root/data/break_data_TINV_clim.dta"

. 
. * Loop over model type - creating csvvs for each type. 
. * Note TINV_clim_lininter_double is exactly the same csvv as TINV_clim_linint
> er
. * Hence we copy the csvv made for TINV_clim_lininter
. * 
. foreach model_tt in "TINV_clim" "TINV_clim_lininter" "TINV_clim_lininter_doub
> le"{
  2.         
.         if(inlist("`model_tt'", "TINV_clim", "TINV_clim_lininter")){
  3. 
.                 ***************************************************
.                 *Step 2: Generate CSVV
.                 ***************************************************
. 
.                 // step 1: write csvvs
. 
.                 foreach product in "other_energy" "electricity" {
  4. 
.                         write_csvv , datapath("`DATA'") outpath("`output_csvv
> '") root("$root") ///
>                                 model("`model_tt'") clim_data("GMFD") spec_st
> em("`ster_stem'") ///
>                                 grouping_test("semi-parametric") product("`pr
> oduct'") bknum("break2") ///
>                                 zero_case("Exclude") issue_case("_all-issues"
> ) data_type("replicated_data")     
  5.                         
.                         local coefficientlist_`product' `s(coef_list)'
  6. 
.                 }
  7. 
.                 // step 2: write stacked regression full vcv 
. 
.                 //get number of coefficients
.                 preserve
  8. 
.                         load_spec_csv , specpath("$root/2_projection/0_packag
> es_programs_inputs/projection_set_up") model("`model_tt'")
  9.                         local num_coefficients = `r(nc)'
 10.                         local all_coefficients = 2 * `num_coefficients' * 
> 20 // 2 poly order, 10 income deciles, 2 products
 11.                         return clear
 12. 
.                 restore
 13. 
.                 //write file full vcv. This is combined for electricity and o
> ther_energy
.                 file open csvv using "`output_csvv'/`model_tt'/`ster_stem'_OT
> HERIND_`model_tt'.csvv", write replace
 14. 
.                 write_vcv , ///
>                         coefficientlist(" `coefficientlist_other_energy' `coe
> fficientlist_electricity' ") ///
>                          num_coefficients(`all_coefficients')
 15. 
.                 file close csvv
 16.         }
 17.         else if("`model_tt'" == "TINV_clim_lininter_double"){
 18. 
.                 cap mkdir "`output_csvv'/TINV_clim_lininter_double"
 19.                 
.                 foreach product in "_other_energy" "_electricity" ""{
 20.                         copy "`output_csvv'/TINV_clim_lininter/FD_FGLS_int
> er_OTHERIND`product'_TINV_clim_lininter.csvv" ///
>                                 "`output_csvv'/TINV_clim_lininter_double/FD_F
> GLS_inter_OTHERIND`product'_TINV_clim_lininter_double.csvv", replace 
 21.                 }
 22. 
.         }
 23. }
(2 vars, 10 obs)
(6 observations deleted)
  4
coefficient list retrieved:   cdd20_TINV hdd20_TINV dc1_lgdppc_MA15I
                             (Std. Err. adjusted for 450 clusters in region_i)
------------------------------------------------------------------------------
             |               Robust
  FD_load_pc |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     c.indp1#|
     c.indf1#|
          c. |
FD_temp1_G~D |   .0001291   .0001494     0.86   0.388    -.0001645    .0004228
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_temp2_G~D |  -6.94e-06   3.64e-06    -1.90   0.057    -.0000141    2.22e-07
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_temp1_G~D |   .0007158   .0008454     0.85   0.398    -.0009457    .0023773
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_temp2_G~D |  -2.49e-07   .0000214    -0.01   0.991    -.0000423    .0000418
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_precip1~D |   3.80e-06   .0000127     0.30   0.764    -.0000211    .0000287
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_precip2~D |  -4.29e-08   5.83e-08    -0.74   0.462    -1.57e-07    7.16e-08
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_precip1~D |  -.0000804    .000054    -1.49   0.137    -.0001866    .0000257
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_precip2~D |   1.78e-07   3.69e-07     0.48   0.629    -5.46e-07    9.03e-07
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_hd~1_GMFD |  -6.19e-09   2.77e-08    -0.22   0.823    -6.07e-08    4.83e-08
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_cd~1_GMFD |   3.36e-07   1.43e-07     2.35   0.019     5.56e-08    6.17e-07
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_hd~2_GMFD |   4.73e-10   8.36e-10     0.57   0.572    -1.17e-09    2.12e-09
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_cd~2_GMFD |  -3.89e-09   2.36e-09    -1.65   0.100    -8.52e-09    7.42e-10
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_hd~1_GMFD |   1.54e-07   1.66e-07     0.93   0.354    -1.72e-07    4.80e-07
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_cd~1_GMFD |   5.84e-07   5.97e-07     0.98   0.328    -5.89e-07    1.76e-06
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_hd~2_GMFD |   1.02e-08   4.94e-09     2.05   0.040     4.43e-10    1.99e-08
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_cd~2_GMFD |  -1.48e-08   1.11e-08    -1.34   0.181    -3.66e-08    6.91e-09
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_I1lgdp~15 |   .2138458   .3823827     0.56   0.576    -.5376362    .9653278
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_I2lgdp~15 |    5.13882   1.156105     4.44   0.000     2.866772    7.410868
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_I1lgdp~15 |  -2.229688   3.291853    -0.68   0.499     -8.69904    4.239664
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_I2lgdp~15 |   7.419508   1.768533     4.20   0.000     3.943878    10.89514
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I1temp1 |   .0000754   .0000733     1.03   0.304    -.0000686    .0002194
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I1temp2 |  -1.12e-06   1.61e-06    -0.70   0.487    -4.27e-06    2.04e-06
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I2temp1 |  -.0006769   .0002559    -2.64   0.008    -.0011798   -.0001739
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I2temp2 |   .0000279   6.74e-06     4.14   0.000     .0000147    .0000412
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I1temp1 |   .0004982   .0007611     0.65   0.513    -.0009975    .0019939
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I1temp2 |  -9.40e-06   .0000169    -0.56   0.579    -.0000426    .0000239
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I2temp1 |   -.001111   .0003709    -3.00   0.003    -.0018399    -.000382
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I2temp2 |   .0000122   9.41e-06     1.30   0.195    -6.28e-06    .0000307
             |
DumIncG1F1P1 |   44.69365   11.68242     3.83   0.000     21.73464    67.65266
DumIncG2F1P1 |          0  (omitted)
DumIncG1F1P2 |   74.24042   32.91992     2.26   0.025     9.544173    138.9367
DumIncG2F1P2 |          0  (omitted)
       _cons |   .0254575   .0065137     3.91   0.000     .0126563    .0382586
------------------------------------------------------------------------------

  Estimation results saved on 03aug2020 02:00, produced by

     . reghdfe FD_load_pc c.indp1#c.indf1#c.FD_temp1_GMFD
       c.indp1#c.indf1#c.FD_temp2_GMFD c.indp2#c.indf1#c.FD_temp1_GMFD
       c.indp2#c.indf1#c.FD_temp2_GMFD c.indp1#c.indf1#c.FD_precip1_GMFD
       c.indp1#c.indf1#c.FD_precip2_GMFD c.indp2#c.indf1#c.FD_precip1_GMFD
       c.indp2#c.indf1#c.FD_precip2_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_I1lgdppc_MA15 c.indp1#c.indf1#c.FD_I2lgdppc_MA15
       c.indp2#c.indf1#c.FD_I1lgdppc_MA15 c.indp2#c.indf1#c.FD_I2lgdppc_MA15
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I1temp1
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I1temp2
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I2temp1
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I2temp2
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I1temp1
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I1temp2
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I2temp1
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I2temp2 DumInc* [pw = weight],
       absorb(i.flow_i#i.product_i#i.year#i.subregionid) cluster(region_i)
csvv initiated: /home/liruixue/repos/energy-code-release-2020/projection_inputs
> /csvv/TINV_clim/FD_FGLS_inter_OTHERIND_other_energy_TINV_clim.csvv
Writing csvv header...
TINV_clim
Writing climate variables...
Writing covariates...
Writing gammas...
Writing coef term: ...
Writing coef term: cdd20_TINV...
Writing coef term: hdd20_TINV...
Writing coef term: dc1_lgdppc_MA15I...
Writing vcv...
(2 vars, 10 obs)
(6 observations deleted)
  4
coefficient list retrieved:   cdd20_TINV hdd20_TINV dc1_lgdppc_MA15I
                             (Std. Err. adjusted for 450 clusters in region_i)
------------------------------------------------------------------------------
             |               Robust
  FD_load_pc |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     c.indp1#|
     c.indf1#|
          c. |
FD_temp1_G~D |   .0001291   .0001494     0.86   0.388    -.0001645    .0004228
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_temp2_G~D |  -6.94e-06   3.64e-06    -1.90   0.057    -.0000141    2.22e-07
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_temp1_G~D |   .0007158   .0008454     0.85   0.398    -.0009457    .0023773
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_temp2_G~D |  -2.49e-07   .0000214    -0.01   0.991    -.0000423    .0000418
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_precip1~D |   3.80e-06   .0000127     0.30   0.764    -.0000211    .0000287
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_precip2~D |  -4.29e-08   5.83e-08    -0.74   0.462    -1.57e-07    7.16e-08
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_precip1~D |  -.0000804    .000054    -1.49   0.137    -.0001866    .0000257
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_precip2~D |   1.78e-07   3.69e-07     0.48   0.629    -5.46e-07    9.03e-07
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_hd~1_GMFD |  -6.19e-09   2.77e-08    -0.22   0.823    -6.07e-08    4.83e-08
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_cd~1_GMFD |   3.36e-07   1.43e-07     2.35   0.019     5.56e-08    6.17e-07
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_hd~2_GMFD |   4.73e-10   8.36e-10     0.57   0.572    -1.17e-09    2.12e-09
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_cd~2_GMFD |  -3.89e-09   2.36e-09    -1.65   0.100    -8.52e-09    7.42e-10
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_hd~1_GMFD |   1.54e-07   1.66e-07     0.93   0.354    -1.72e-07    4.80e-07
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_cd~1_GMFD |   5.84e-07   5.97e-07     0.98   0.328    -5.89e-07    1.76e-06
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_hd~2_GMFD |   1.02e-08   4.94e-09     2.05   0.040     4.43e-10    1.99e-08
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_cd~2_GMFD |  -1.48e-08   1.11e-08    -1.34   0.181    -3.66e-08    6.91e-09
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_I1lgdp~15 |   .2138458   .3823827     0.56   0.576    -.5376362    .9653278
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_I2lgdp~15 |    5.13882   1.156105     4.44   0.000     2.866772    7.410868
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_I1lgdp~15 |  -2.229688   3.291853    -0.68   0.499     -8.69904    4.239664
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_I2lgdp~15 |   7.419508   1.768533     4.20   0.000     3.943878    10.89514
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I1temp1 |   .0000754   .0000733     1.03   0.304    -.0000686    .0002194
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I1temp2 |  -1.12e-06   1.61e-06    -0.70   0.487    -4.27e-06    2.04e-06
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I2temp1 |  -.0006769   .0002559    -2.64   0.008    -.0011798   -.0001739
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I2temp2 |   .0000279   6.74e-06     4.14   0.000     .0000147    .0000412
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I1temp1 |   .0004982   .0007611     0.65   0.513    -.0009975    .0019939
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I1temp2 |  -9.40e-06   .0000169    -0.56   0.579    -.0000426    .0000239
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I2temp1 |   -.001111   .0003709    -3.00   0.003    -.0018399    -.000382
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I2temp2 |   .0000122   9.41e-06     1.30   0.195    -6.28e-06    .0000307
             |
DumIncG1F1P1 |   44.69365   11.68242     3.83   0.000     21.73464    67.65266
DumIncG2F1P1 |          0  (omitted)
DumIncG1F1P2 |   74.24042   32.91992     2.26   0.025     9.544173    138.9367
DumIncG2F1P2 |          0  (omitted)
       _cons |   .0254575   .0065137     3.91   0.000     .0126563    .0382586
------------------------------------------------------------------------------

  Estimation results saved on 03aug2020 02:00, produced by

     . reghdfe FD_load_pc c.indp1#c.indf1#c.FD_temp1_GMFD
       c.indp1#c.indf1#c.FD_temp2_GMFD c.indp2#c.indf1#c.FD_temp1_GMFD
       c.indp2#c.indf1#c.FD_temp2_GMFD c.indp1#c.indf1#c.FD_precip1_GMFD
       c.indp1#c.indf1#c.FD_precip2_GMFD c.indp2#c.indf1#c.FD_precip1_GMFD
       c.indp2#c.indf1#c.FD_precip2_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_I1lgdppc_MA15 c.indp1#c.indf1#c.FD_I2lgdppc_MA15
       c.indp2#c.indf1#c.FD_I1lgdppc_MA15 c.indp2#c.indf1#c.FD_I2lgdppc_MA15
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I1temp1
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I1temp2
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I2temp1
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I2temp2
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I1temp1
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I1temp2
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I2temp1
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I2temp2 DumInc* [pw = weight],
       absorb(i.flow_i#i.product_i#i.year#i.subregionid) cluster(region_i)
csvv initiated: /home/liruixue/repos/energy-code-release-2020/projection_inputs
> /csvv/TINV_clim/FD_FGLS_inter_OTHERIND_electricity_TINV_clim.csvv
Writing csvv header...
TINV_clim
Writing climate variables...
Writing covariates...
Writing gammas...
Writing coef term: ...
Writing coef term: cdd20_TINV...
Writing coef term: hdd20_TINV...
Writing coef term: dc1_lgdppc_MA15I...
Writing vcv...
(2 vars, 10 obs)
(6 observations deleted)
  4
(2 vars, 10 obs)
(4 observations deleted)
  6
coefficient list retrieved:   year cdd20_TINV hdd20_TINV dc1_lgdppc_MA15yearI d
> c1_lgdppc_MA15I
                             (Std. Err. adjusted for 450 clusters in region_i)
------------------------------------------------------------------------------
             |               Robust
  FD_load_pc |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     c.indp1#|
     c.indf1#|
          c. |
FD_temp1_G~D |  -.0274377   .0173589    -1.58   0.115    -.0615525     .006677
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_temp2_G~D |   .0009829    .000436     2.25   0.025     .0001261    .0018397
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_temp1_G~D |   .1035771   .0725862     1.43   0.154    -.0390739     .246228
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_temp2_G~D |  -.0020895   .0016552    -1.26   0.207    -.0053424    .0011634
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_precip1~D |  -1.06e-07   .0000134    -0.01   0.994    -.0000263    .0000261
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_precip2~D |  -6.43e-08   5.85e-08    -1.10   0.272    -1.79e-07    5.06e-08
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_precip1~D |   -.000073   .0000547    -1.33   0.183    -.0001804    .0000345
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_precip2~D |   1.10e-07   3.75e-07     0.29   0.770    -6.27e-07    8.46e-07
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_hd~1_GMFD |   4.16e-08   2.77e-08     1.50   0.134    -1.28e-08    9.61e-08
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_cd~1_GMFD |   3.72e-07   2.03e-07     1.83   0.067    -2.67e-08    7.71e-07
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_hd~2_GMFD |  -4.60e-11   9.17e-10    -0.05   0.960    -1.85e-09    1.76e-09
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_cd~2_GMFD |  -3.19e-09   3.28e-09    -0.97   0.331    -9.64e-09    3.25e-09
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_hd~1_GMFD |   1.95e-07   1.56e-07     1.25   0.214    -1.12e-07    5.02e-07
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_cd~1_GMFD |   5.24e-07   5.76e-07     0.91   0.363    -6.08e-07    1.66e-06
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_hd~2_GMFD |   9.68e-09   4.92e-09     1.97   0.050     5.14e-12    1.94e-08
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_cd~2_GMFD |  -1.26e-08   1.04e-08    -1.21   0.226    -3.30e-08    7.82e-09
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_I1lgdp~15 |   1.001625   .4002066     2.50   0.013     .2151145    1.788136
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_I2lgdp~15 |   5.132564   1.105843     4.64   0.000     2.959294    7.305834
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_I1lgdp~15 |  -1.304672   3.229599    -0.40   0.686    -7.651678    5.042335
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_I2lgdp~15 |   7.606125   1.782489     4.27   0.000     4.103068    11.10918
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I1temp1 |  -.0354481   .0069871    -5.07   0.000    -.0491797   -.0217166
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I1temp2 |   .0009881   .0002372     4.17   0.000     .0005219    .0014544
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I2temp1 |     .04019   .0449719     0.89   0.372    -.0481915    .1285715
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I2temp2 |  -.0030345   .0015837    -1.92   0.056    -.0061469    .0000779
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I1temp1 |   .0021016   .0336058     0.06   0.950    -.0639425    .0681457
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I1temp2 |   .0000486   .0012739     0.04   0.970    -.0024549    .0025522
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I2temp1 |   .0144615   .0310299     0.47   0.641    -.0465202    .0754433
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I2temp2 |  -.0012789   .0012115    -1.06   0.292    -.0036598     .001102
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_ye~1_GMFD |    .000014   8.70e-06     1.60   0.109    -3.14e-06    .0000311
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_ye~2_GMFD |  -5.01e-07   2.19e-07    -2.29   0.022    -9.31e-07   -7.15e-08
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_ye~1_GMFD |  -.0000516   .0000362    -1.42   0.155    -.0001227    .0000196
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_ye~2_GMFD |   1.05e-06   8.26e-07     1.27   0.206    -5.77e-07    2.67e-06
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~rI1temp1 |   .0000178   3.51e-06     5.09   0.000      .000011    .0000247
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~rI1temp2 |  -4.97e-07   1.19e-07    -4.17   0.000    -7.31e-07   -2.63e-07
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~rI2temp1 |  -.0000205   .0000226    -0.91   0.364    -.0000649    .0000239
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~rI2temp2 |   1.54e-06   7.95e-07     1.93   0.054    -2.64e-08    3.10e-06
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~rI1temp1 |  -8.98e-07   .0000168    -0.05   0.957     -.000034    .0000322
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~rI1temp2 |  -2.76e-08   6.39e-07    -0.04   0.966    -1.28e-06    1.23e-06
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~rI2temp1 |  -7.74e-06   .0000155    -0.50   0.618    -.0000382    .0000227
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~rI2temp2 |   6.47e-07   6.06e-07     1.07   0.287    -5.45e-07    1.84e-06
             |
DumIncG1F1P1 |   37.49089   11.33995     3.31   0.001     15.20493    59.77686
DumIncG2F1P1 |          0  (omitted)
DumIncG1F1P2 |   68.53555   32.15538     2.13   0.034     5.341816    131.7293
DumIncG2F1P2 |          0  (omitted)
       _cons |  -.1935701   .0403844    -4.79   0.000    -.2729361   -.1142042
------------------------------------------------------------------------------

  Estimation results saved on 03aug2020 02:00, produced by

     . reghdfe FD_load_pc c.indp1#c.indf1#c.FD_temp1_GMFD
       c.indp1#c.indf1#c.FD_temp2_GMFD c.indp2#c.indf1#c.FD_temp1_GMFD
       c.indp2#c.indf1#c.FD_temp2_GMFD c.indp1#c.indf1#c.FD_precip1_GMFD
       c.indp1#c.indf1#c.FD_precip2_GMFD c.indp2#c.indf1#c.FD_precip1_GMFD
       c.indp2#c.indf1#c.FD_precip2_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_I1lgdppc_MA15 c.indp1#c.indf1#c.FD_I2lgdppc_MA15
       c.indp2#c.indf1#c.FD_I1lgdppc_MA15 c.indp2#c.indf1#c.FD_I2lgdppc_MA15
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I1temp1
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I1temp2
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I2temp1
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I2temp2
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I1temp1
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I1temp2
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I2temp1
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I2temp2
       c.indp1#c.indf1#c.FD_yeartemp1_GMFD
       c.indp1#c.indf1#c.FD_yeartemp2_GMFD
       c.indp2#c.indf1#c.FD_yeartemp1_GMFD
       c.indp2#c.indf1#c.FD_yeartemp2_GMFD
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15yearI1temp1
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15yearI1temp2
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15yearI2temp1
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15yearI2temp2
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15yearI1temp1
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15yearI1temp2
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15yearI2temp1
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15yearI2temp2 DumInc* [pw = weight],
       absorb(i.flow_i#i.product_i#i.year#i.subregionid) cluster(region_i)
csvv initiated: /home/liruixue/repos/energy-code-release-2020/projection_inputs
> /csvv/TINV_clim_lininter/FD_FGLS_inter_OTHERIND_other_energy_TINV_clim_linint
> er.csvv
Writing csvv header...
TINV_clim_lininter
Writing climate variables...
Writing covariates...
Writing gammas...
Writing coef term: ...
Writing coef term: year...
Writing coef term: cdd20_TINV...
Writing coef term: hdd20_TINV...
Writing coef term: dc1_lgdppc_MA15yearI...
Writing coef term: dc1_lgdppc_MA15I...
Writing vcv...
(2 vars, 10 obs)
(4 observations deleted)
  6
coefficient list retrieved:   year cdd20_TINV hdd20_TINV dc1_lgdppc_MA15yearI d
> c1_lgdppc_MA15I
                             (Std. Err. adjusted for 450 clusters in region_i)
------------------------------------------------------------------------------
             |               Robust
  FD_load_pc |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     c.indp1#|
     c.indf1#|
          c. |
FD_temp1_G~D |  -.0274377   .0173589    -1.58   0.115    -.0615525     .006677
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_temp2_G~D |   .0009829    .000436     2.25   0.025     .0001261    .0018397
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_temp1_G~D |   .1035771   .0725862     1.43   0.154    -.0390739     .246228
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_temp2_G~D |  -.0020895   .0016552    -1.26   0.207    -.0053424    .0011634
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_precip1~D |  -1.06e-07   .0000134    -0.01   0.994    -.0000263    .0000261
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_precip2~D |  -6.43e-08   5.85e-08    -1.10   0.272    -1.79e-07    5.06e-08
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_precip1~D |   -.000073   .0000547    -1.33   0.183    -.0001804    .0000345
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_precip2~D |   1.10e-07   3.75e-07     0.29   0.770    -6.27e-07    8.46e-07
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_hd~1_GMFD |   4.16e-08   2.77e-08     1.50   0.134    -1.28e-08    9.61e-08
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_cd~1_GMFD |   3.72e-07   2.03e-07     1.83   0.067    -2.67e-08    7.71e-07
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_hd~2_GMFD |  -4.60e-11   9.17e-10    -0.05   0.960    -1.85e-09    1.76e-09
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_cd~2_GMFD |  -3.19e-09   3.28e-09    -0.97   0.331    -9.64e-09    3.25e-09
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_hd~1_GMFD |   1.95e-07   1.56e-07     1.25   0.214    -1.12e-07    5.02e-07
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_cd~1_GMFD |   5.24e-07   5.76e-07     0.91   0.363    -6.08e-07    1.66e-06
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_hd~2_GMFD |   9.68e-09   4.92e-09     1.97   0.050     5.14e-12    1.94e-08
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_cd~2_GMFD |  -1.26e-08   1.04e-08    -1.21   0.226    -3.30e-08    7.82e-09
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_I1lgdp~15 |   1.001625   .4002066     2.50   0.013     .2151145    1.788136
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_I2lgdp~15 |   5.132564   1.105843     4.64   0.000     2.959294    7.305834
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_I1lgdp~15 |  -1.304672   3.229599    -0.40   0.686    -7.651678    5.042335
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_I2lgdp~15 |   7.606125   1.782489     4.27   0.000     4.103068    11.10918
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I1temp1 |  -.0354481   .0069871    -5.07   0.000    -.0491797   -.0217166
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I1temp2 |   .0009881   .0002372     4.17   0.000     .0005219    .0014544
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I2temp1 |     .04019   .0449719     0.89   0.372    -.0481915    .1285715
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~5I2temp2 |  -.0030345   .0015837    -1.92   0.056    -.0061469    .0000779
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I1temp1 |   .0021016   .0336058     0.06   0.950    -.0639425    .0681457
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I1temp2 |   .0000486   .0012739     0.04   0.970    -.0024549    .0025522
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I2temp1 |   .0144615   .0310299     0.47   0.641    -.0465202    .0754433
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~5I2temp2 |  -.0012789   .0012115    -1.06   0.292    -.0036598     .001102
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_ye~1_GMFD |    .000014   8.70e-06     1.60   0.109    -3.14e-06    .0000311
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_ye~2_GMFD |  -5.01e-07   2.19e-07    -2.29   0.022    -9.31e-07   -7.15e-08
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_ye~1_GMFD |  -.0000516   .0000362    -1.42   0.155    -.0001227    .0000196
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_ye~2_GMFD |   1.05e-06   8.26e-07     1.27   0.206    -5.77e-07    2.67e-06
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~rI1temp1 |   .0000178   3.51e-06     5.09   0.000      .000011    .0000247
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~rI1temp2 |  -4.97e-07   1.19e-07    -4.17   0.000    -7.31e-07   -2.63e-07
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~rI2temp1 |  -.0000205   .0000226    -0.91   0.364    -.0000649    .0000239
             |
     c.indp1#|
     c.indf1#|
          c. |
FD_~rI2temp2 |   1.54e-06   7.95e-07     1.93   0.054    -2.64e-08    3.10e-06
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~rI1temp1 |  -8.98e-07   .0000168    -0.05   0.957     -.000034    .0000322
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~rI1temp2 |  -2.76e-08   6.39e-07    -0.04   0.966    -1.28e-06    1.23e-06
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~rI2temp1 |  -7.74e-06   .0000155    -0.50   0.618    -.0000382    .0000227
             |
     c.indp2#|
     c.indf1#|
          c. |
FD_~rI2temp2 |   6.47e-07   6.06e-07     1.07   0.287    -5.45e-07    1.84e-06
             |
DumIncG1F1P1 |   37.49089   11.33995     3.31   0.001     15.20493    59.77686
DumIncG2F1P1 |          0  (omitted)
DumIncG1F1P2 |   68.53555   32.15538     2.13   0.034     5.341816    131.7293
DumIncG2F1P2 |          0  (omitted)
       _cons |  -.1935701   .0403844    -4.79   0.000    -.2729361   -.1142042
------------------------------------------------------------------------------

  Estimation results saved on 03aug2020 02:00, produced by

     . reghdfe FD_load_pc c.indp1#c.indf1#c.FD_temp1_GMFD
       c.indp1#c.indf1#c.FD_temp2_GMFD c.indp2#c.indf1#c.FD_temp1_GMFD
       c.indp2#c.indf1#c.FD_temp2_GMFD c.indp1#c.indf1#c.FD_precip1_GMFD
       c.indp1#c.indf1#c.FD_precip2_GMFD c.indp2#c.indf1#c.FD_precip1_GMFD
       c.indp2#c.indf1#c.FD_precip2_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp1#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp1_GMFD
       c.indp2#c.indf1#c.FD_hdd20_TINVtemp2_GMFD
       c.indp2#c.indf1#c.FD_cdd20_TINVtemp2_GMFD
       c.indp1#c.indf1#c.FD_I1lgdppc_MA15 c.indp1#c.indf1#c.FD_I2lgdppc_MA15
       c.indp2#c.indf1#c.FD_I1lgdppc_MA15 c.indp2#c.indf1#c.FD_I2lgdppc_MA15
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I1temp1
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I1temp2
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I2temp1
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15I2temp2
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I1temp1
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I1temp2
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I2temp1
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15I2temp2
       c.indp1#c.indf1#c.FD_yeartemp1_GMFD
       c.indp1#c.indf1#c.FD_yeartemp2_GMFD
       c.indp2#c.indf1#c.FD_yeartemp1_GMFD
       c.indp2#c.indf1#c.FD_yeartemp2_GMFD
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15yearI1temp1
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15yearI1temp2
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15yearI2temp1
       c.indp1#c.indf1#c.FD_dc1_lgdppc_MA15yearI2temp2
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15yearI1temp1
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15yearI1temp2
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15yearI2temp1
       c.indp2#c.indf1#c.FD_dc1_lgdppc_MA15yearI2temp2 DumInc* [pw = weight],
       absorb(i.flow_i#i.product_i#i.year#i.subregionid) cluster(region_i)
csvv initiated: /home/liruixue/repos/energy-code-release-2020/projection_inputs
> /csvv/TINV_clim_lininter/FD_FGLS_inter_OTHERIND_electricity_TINV_clim_lininte
> r.csvv
Writing csvv header...
TINV_clim_lininter
Writing climate variables...
Writing covariates...
Writing gammas...
Writing coef term: ...
Writing coef term: year...
Writing coef term: cdd20_TINV...
Writing coef term: hdd20_TINV...
Writing coef term: dc1_lgdppc_MA15yearI...
Writing coef term: dc1_lgdppc_MA15I...
Writing vcv...
(2 vars, 10 obs)
(4 observations deleted)
  6

. 
end of do-file
